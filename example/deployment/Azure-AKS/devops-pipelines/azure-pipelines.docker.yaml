trigger:
  batch: true
  branches:
    include:
    - '*'
  paths:
    include:
    - example/deployment/local-docker/*
    - example/deployment/Azure-AKS/devops-pipelines/azure-pipelines.docker.yaml
    - example/deployment/Azure-AKS/devops-pipelines/azure-pipelines.docker-template.yaml



stages:
- stage: Docker_Build_and_Push
  variables: 
      - group: Palisade-azure
  jobs:
    - job:
      displayName: client
      steps:
      - template: azure-pipelines.docker-template.yaml  
        parameters:
          imageName: client
    - job:
      displayName: config-service
      steps:
      - template: azure-pipelines.docker-template.yaml  
        parameters:
          imageName: config-service
    - job:
      steps:
      - template: azure-pipelines.docker-template.yaml  
        parameters:
          imageName: configure-services
    - job:
      steps:
      - template: azure-pipelines.docker-template.yaml  
        parameters:
          imageName: data-service
    - job:
      steps:
      - template: azure-pipelines.docker-template.yaml  
        parameters:
          imageName: etcd
    - job:
      steps:
      - template: azure-pipelines.docker-template.yaml  
        parameters:
          imageName: palisade-service
    - job:
      steps:
      - template: azure-pipelines.docker-template.yaml  
        parameters:
          imageName: policy-service
    - job:
      steps:
      - template: azure-pipelines.docker-template.yaml  
        parameters:
          imageName: resource-service
    - job:
      steps:
      - template: azure-pipelines.docker-template.yaml  
        parameters:
          imageName: rest-redirector
    - job:
      steps:
      - template: azure-pipelines.docker-template.yaml  
        parameters:
          imageName: user-service